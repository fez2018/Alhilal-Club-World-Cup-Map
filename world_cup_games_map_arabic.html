<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <style>
        .custom-icon {
            background: none;
            border: none;
        }
        .custom-popup .leaflet-popup-content-wrapper {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            box-shadow: 0 3px 14px rgba(0,0,0,0.2);
        }
        .custom-popup .leaflet-popup-content {
            margin: 15px;
            font-family: 'Arial', sans-serif;
            direction: rtl;
        }
        .custom-popup h4 {
            color: #2c3e50;
            margin: 0 0 10px 0;
            font-size: 16px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }
        .custom-popup p {
            margin: 0;
            line-height: 1.6;
            color: #34495e;
        }
        .custom-popup strong {
            color: #2980b9;
        }
        .icon-plane {
            color: #3498db;
            font-size: 16px;
            text-shadow: 2px 2px 3px rgba(0,0,0,0.3);
            background: rgba(255,255,255,0.9);
            padding: 8px;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .icon-soccer {
            color: #e74c3c;
            font-size: 16px;
            text-shadow: 2px 2px 3px rgba(0,0,0,0.3);
            background: rgba(255,255,255,0.9);
            padding: 8px;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        /* Mobile-friendly legend styles */
        .legend-container {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 1000;
            max-width: 300px;
            font-size: 14px;
            line-height: 1.4;
        }

        .legend-container h2 {
            margin: 0 0 10px 0;
            font-size: 16px;
            color: #1a237e;
        }

        .legend-container p {
            margin: 5px 0;
            font-size: 13px;
        }

        .legend-container strong {
            color: #1a237e;
            font-size: 13px;
        }

        .legend-container ul {
            margin: 5px 0;
            padding-left: 20px;
            font-size: 13px;
        }

        .legend-container li {
            margin: 3px 0;
        }

        @media (max-width: 768px) {
            .legend-container {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%) scale(0.9);
                width: 90%;
                max-width: 300px;
                padding: 15px;
                font-size: 14px;
                background: rgba(255, 255, 255, 0.98);
                border-radius: 12px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
            }

            .legend-container.show {
                opacity: 1;
                visibility: visible;
                transform: translate(-50%, -50%) scale(1);
            }

            .legend-container h2 {
                font-size: 16px;
                margin: 0 0 10px 0;
                text-align: center;
            }

            .legend-container p, 
            .legend-container strong,
            .legend-container li {
                font-size: 14px;
                margin: 5px 0;
            }

            .legend-container ul {
                margin: 8px 0;
                padding-left: 15px;
            }

            .toggle-legend {
                display: block;
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: #1a237e;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 25px;
                font-size: 14px;
                z-index: 1001;
                cursor: pointer;
                box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            }

            .legend-container hr {
                margin: 10px 0;
            }

            .legend-container .social-links {
                margin-top: 15px;
                padding-top: 15px;
                border-top: 1px solid #eee;
            }
        }
    </style>
    <script>
        L_NO_TOUCH = false;
        L_DISABLE_3D = false;
    </script>
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <script src="https://cdn.jsdelivr.net/npm/leaflet-ant-path@1.1.2/dist/leaflet-ant-path.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/ljagis/leaflet-measure@2.1.7/dist/leaflet-measure.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ljagis/leaflet-measure@2.1.7/dist/leaflet-measure.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/leaflet.fullscreen@3.0.0/Control.FullScreen.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.fullscreen@3.0.0/Control.FullScreen.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-minimap/3.6.1/Control.MiniMap.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-minimap/3.6.1/Control.MiniMap.css"/>
</head>
<body>
    <div class="title-container" style="position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 1000; 
         background-color: white; padding: 10px 20px; border: 2px solid #2c3e50; border-radius: 5px; 
         box-shadow: 0 0 10px rgba(0,0,0,0.2); text-align: center; direction: rtl;">
        <h2 style="margin: 0; color: #2c3e50; font-size: 20px; font-weight: bold;">خريطة رحلة الهلال في كأس العالم للأندية ٢٠٢٥</h2>
    </div>
    
    <button class="toggle-legend" onclick="toggleLegend()">عرض/إخفاء المعلومات</button>
    
    <div class="legend-container" id="legend">
        <h2>جدول المباريات</h2>
        <p><strong>ريال مدريد ضد الهلال</strong><br>١٨ يونيو، ٢٠٢٥<br>٣:٠٠ مساءً بتوقيت شرق الولايات المتحدة<br>ملعب هارد روك</p>
        <p><strong>ريد بول سالزبورغ ضد الهلال</strong><br>٢٢ يونيو، ٢٠٢٥<br>٦:٠٠ مساءً بتوقيت شرق الولايات المتحدة<br>ملعب أودي</p>
        <p><strong>الهلال ضد نادي باتشوكا</strong><br>٢٦ يونيو، ٢٠٢٥<br>٨:٠٠ مساءً بتوقيت وسط الولايات المتحدة<br>ملعب جيوديس</p>
        <hr>
        <h2>مسارات الرحلة</h2>
        <ul>
            <li><span style="display: inline-block; width: 16px; height: 3px; background-color: #FF0000; margin-right: 4px;"></span>الرياض (RUH) ← ميامي</li>
            <li><span style="display: inline-block; width: 16px; height: 3px; background-color: #00FF00; margin-right: 4px;"></span>ميامي ← واشنطن العاصمة</li>
            <li><span style="display: inline-block; width: 16px; height: 3px; background-color: #0000FF; margin-right: 4px;"></span>واشنطن العاصمة ← ناشفيل</li>
            <li><span style="display: inline-block; width: 16px; height: 3px; background-color: #FFA500; margin-right: 4px;"></span>ناشفيل ← الرياض (RUH)</li>
        </ul>
        <hr>
        <div>
            <h4>من إعداد د. فوازن الفوزان<br>للحجوزات:</h4>
            <div style="display: flex; justify-content: center; gap: 15px; margin-bottom: 4px;">
                <a href="https://www.snapchat.com/add/fawz12" target="_blank" style="text-decoration: none; display: flex; flex-direction: column; align-items: center;">
                    <img src="team_logos/Mysnapchat.jpg" style="width: 60px; height: 60px; margin-bottom: 3px; object-fit: contain;">
                    <span style="font-size: 10px; color: #000000;">fawz12</span>
                </a>
                <a href="https://www.tiktok.com/@fawzanalfawzan5" target="_blank" style="text-decoration: none; display: flex; flex-direction: column; align-items: center;">
                    <img src="team_logos/TikTok.jpg" style="width: 60px; height: 60px; margin-bottom: 3px; object-fit: contain;">
                    <span style="font-size: 10px; color: #000000;">fawzanalfawzan5</span>
                </a>
            </div>
            <div style="font-size: 0.7em; color: #666; margin-top: 4px;">
                © ٢٠٢٤ جميع الحقوق محفوظة
            </div>
        </div>
    </div>
    
    <div id="map"></div>

    <script>
        // Add this function at the beginning of your script section
        function toggleLegend() {
            const legend = document.getElementById('legend');
            legend.classList.toggle('show');
        }
        
        var map = L.map('map').setView([30.0, -50.0], 3);
        
        // Add satellite layer
        L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Imagery © Esri'
        }).addTo(map);

        // Add measure control
        var measureControl = new L.Control.Measure({
            position: 'topright',
            primaryLengthUnit: 'kilometers',
            secondaryLengthUnit: 'miles',
            primaryAreaUnit: 'sqkilometers',
            secondaryAreaUnit: 'acres'
        });
        measureControl.addTo(map);

        // Add fullscreen control
        map.addControl(new L.Control.FullScreen());

        // Add minimap
        var minimap = new L.Control.MiniMap(L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'), {
            toggleDisplay: true,
            minimized: false,
            position: 'bottomright'
        }).addTo(map);

        // Add markers and paths with correct coordinates
        var riyadh = [24.9578, 46.6989];
        var miami = [25.9580, -80.2389];
        var washington = [38.8686, -77.0126];
        var nashville = [36.1298, -86.7659];

        // Add markers with custom icons
        L.marker(riyadh, {icon: L.AwesomeMarkers.icon({icon: 'soccer', markerColor: 'red'})})
            .bindPopup('<div class="custom-popup"><h4>الرياض</h4><p>نقطة البداية</p><p>مطار الملك خالد الدولي (RUH)</p></div>')
            .addTo(map);

        L.marker(miami, {icon: L.AwesomeMarkers.icon({icon: 'soccer', markerColor: 'blue'})})
            .bindPopup('<div class="custom-popup"><h4>ريال مدريد ضد الهلال</h4><p>التاريخ: ١٨ يونيو، ٢٠٢٥</p><p>الوقت: ٣:٠٠ مساءً بتوقيت شرق الولايات المتحدة</p><p>الملعب: ملعب هارد روك، ميامي جاردنز، فلوريدا</p></div>')
            .addTo(map);

        L.marker(washington, {icon: L.AwesomeMarkers.icon({icon: 'soccer', markerColor: 'blue'})})
            .bindPopup('<div class="custom-popup"><h4>ريد بول سالزبورغ ضد الهلال</h4><p>التاريخ: ٢٢ يونيو، ٢٠٢٥</p><p>الوقت: ٦:٠٠ مساءً بتوقيت شرق الولايات المتحدة</p><p>الملعب: ملعب أودي، واشنطن العاصمة</p></div>')
            .addTo(map);

        L.marker(nashville, {icon: L.AwesomeMarkers.icon({icon: 'soccer', markerColor: 'blue'})})
            .bindPopup('<div class="custom-popup"><h4>الهلال ضد نادي باتشوكا</h4><p>التاريخ: ٢٦ يونيو، ٢٠٢٥</p><p>الوقت: ٨:٠٠ مساءً بتوقيت وسط الولايات المتحدة</p><p>الملعب: ملعب جيوديس، ناشفيل، تينيسي</p></div>')
            .addTo(map);

        // Add flight paths with plane icons
        var path1 = L.polyline.antPath([riyadh, miami], {
            color: '#FF0000',
            weight: 3,
            opacity: 0.6,
            dashArray: [10, 20],
            animate: true
        }).addTo(map);

        var path2 = L.polyline.antPath([miami, washington], {
            color: '#00FF00',
            weight: 3,
            opacity: 0.6,
            dashArray: [10, 20],
            animate: true
        }).addTo(map);

        var path3 = L.polyline.antPath([washington, nashville], {
            color: '#0000FF',
            weight: 3,
            opacity: 0.6,
            dashArray: [10, 20],
            animate: true
        }).addTo(map);

        var path4 = L.polyline.antPath([nashville, riyadh], {
            color: '#FFA500',
            weight: 3,
            opacity: 0.6,
            dashArray: [10, 20],
            animate: true
        }).addTo(map);

        // Fit bounds to show all markers
        var bounds = L.latLngBounds([riyadh, miami, washington, nashville]);
        map.fitBounds(bounds, {padding: [50, 50]});
    </script>
</body>
</html>